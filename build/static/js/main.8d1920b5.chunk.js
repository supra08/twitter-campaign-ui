(this.webpackJsonptwicamp=this.webpackJsonptwicamp||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/twitter.53c7454e.svg"},39:function(e,t,a){e.exports=a(40)},40:function(e,t,a){"use strict";a.r(t);var n=a(16),l=a(0),c=a.n(l),r=a(32),o=a.n(r),m=a(18),i=a(57),s=a(1),u=a(17),f=a(55),d=a(53),E=a(52),p=a(21),w=a(33),h=a.n(w),g=a(15),j=a(28),y=a(54),x=a(56);const C="https://twicamp-backend.herokuapp.com";function b(){const e=Object(E.a)(),t=(e.isOpen,e.onOpen,e.onClose,c.a.useRef()),a=Object(l.useState)(null),r=Object(n.a)(a,2),o=(r[0],r[1]),w=Object(l.useState)(!1),b=Object(n.a)(w,2),O=(b[0],b[1],Object(l.useState)([])),v=Object(n.a)(O,2),_=v[0],D=v[1],k=Object(l.useState)(null),S=Object(n.a)(k,2),T=S[0],I=S[1],R=Object(l.useState)(!1),F=Object(n.a)(R,2),N=F[0],q=F[1],J=Object(l.useState)(null),G=Object(n.a)(J,2),L=G[0],P=G[1];function M(e){console.log("here -1"),console.log(e),fetch(C+"/campaigns?user_id="+e,{method:"GET"}).then(e=>e.json()).then(e=>{D(e.campaign_list)},e=>{o(e)})}Object(l.useEffect)(()=>{L&&(console.log("########"),console.log(L),fetch(C+"/campaigns?user_id="+L.id,{method:"GET"}).then(e=>e.json()).then(e=>{D(e.campaign_list)},e=>{o(e)}))},[]);let z="",B="";const U=Object(l.useState)(c.a.createElement(u.a,{onClick:function(){fetch(C+"/request_token",{method:"GET"}).then(e=>e.json()).then(e=>{if("true"==e.oauth_callback_confirmed){const t=e.oauth_token;window.location.replace("https://api.twitter.com/oauth/authenticate?oauth_token="+t)}else console.log("Request token can not be retrieved.")})}}," Login ")),A=Object(n.a)(U,2),H=A[0],K=A[1],Q=new URLSearchParams(window.location.search);return z=Q.get("oauth_token"),B=Q.get("oauth_verifier"),Object(l.useEffect)(()=>{z&&B&&fetch(C+"/access_token?oauth_token="+z+"&oauth_verifier="+B,{method:"GET"}).then(e=>e.json()).then(e=>{console.log(e),"success"==e.status&&(K(c.a.createElement(u.a,{onClick:()=>{return t=e.user_id,void fetch(C+"/logout?user_id="+t,{method:"GET"}).then(e=>e.json()).then(e=>{"true"==e.status?(P(null),window.location.replace("http://localhost:3000/")):console.log("Logout failed")});var t}}," Logout ")),P({name:e.me.name,handle:e.screen_name,followers:e.me.followers_count,following:e.me.friends_count,id:e.user_id}),M(e.user_id))},e=>{K(!1),o(e)})},[]),c.a.createElement(m.a,null,c.a.createElement(i.a,null),c.a.createElement(s.a,{w:"100vw",h:"100vh",d:"flex",flexDirection:"row"},c.a.createElement(s.a,{h:"100%",w:"20%",d:"flex",flexDirection:"column"},c.a.createElement(s.a,{position:"static",p:"5%",w:"100%",d:"flex",justifyContent:"center",border:"1px",borderRadius:"md",borderColor:"gray.200"},"My Campaigns"),c.a.createElement(s.a,{d:"flex",flexDirection:"column",w:"100%"},console.log(_),_.map(e=>c.a.createElement(s.a,null,c.a.createElement(u.a,{w:"100%",leftIcon:"check-circle",color:"green.500",onClick:()=>{return t=e.name,void _.map(e=>{e.name===t&&(I(e),q(!1))});var t}},e.name))))),c.a.createElement(d.a,{mr:"0",ml:"0",orientation:"vertical"}),c.a.createElement(s.a,{h:"100%",w:"80%",d:"flex",flexDirection:"column",alignItems:"center"},c.a.createElement(s.a,{mt:"10em",width:"100%",display:"flex",justifyContent:"flex-end",pr:"1em",mt:"2em"},c.a.createElement(s.a,null," ",L?c.a.createElement(u.a,{ref:t,onClick:function(){q(!N)},leftIcon:"add"},"New Campaign"):""),c.a.createElement(s.a,{ml:"1em"},H)),1==N?c.a.createElement(s.a,{d:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",w:"100%",mt:"2em"},c.a.createElement("form",{style:{width:"100%"},onSubmit:function(e){e.preventDefault();const t=new FormData(e.target);fetch(C+"/campaign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.get("name"),id:t.get("id"),strategy:t.get("strategy"),message:t.get("message"),user_id:L.id})}).then(e=>e.json().then(e=>{"success"==e.status&&(q(!1),M(L.id))}))}},c.a.createElement(g.a,{isRequired:!0},c.a.createElement(s.a,{w:"100%",d:"flex",flexDirection:"row",justifyContent:"space-between"},c.a.createElement(s.a,{w:"20%",pl:"1em"},c.a.createElement(j.a,{htmlFor:"name"},"Campaign Name")),c.a.createElement(s.a,{w:"70%",pr:"1em"},c.a.createElement(p.a,{id:"name",name:"name",placeholder:"Campaign Name"})))),c.a.createElement(g.a,{isRequired:!0},c.a.createElement(s.a,{w:"100%",d:"flex",flexDirection:"row",justifyContent:"space-between",mt:"1em"},c.a.createElement(s.a,{w:"20%",pl:"1em"},c.a.createElement(j.a,{htmlFor:"id"},"Campaign ID")),c.a.createElement(s.a,{w:"70%",pr:"1em"},c.a.createElement(p.a,{id:"id",name:"id",placeholder:"Campaign ID"})))),c.a.createElement(g.a,{isRequired:!0},c.a.createElement(s.a,{w:"100%",d:"flex",flexDirection:"row",justifyContent:"space-between",mt:"1em"},c.a.createElement(s.a,{w:"20%",pl:"1em"},c.a.createElement(j.a,{htmlFor:"message"},"Message Text")),c.a.createElement(s.a,{w:"70%",pr:"1em"},c.a.createElement(y.a,{name:"message",id:"message",placeholder:"Type your message here....."})))),c.a.createElement(g.a,{isRequired:!0},c.a.createElement(s.a,{w:"100%",d:"flex",flexDirection:"row",justifyContent:"space-between",mt:"1em"},c.a.createElement(s.a,{w:"20%",pl:"1em"},c.a.createElement(j.a,{htmlFor:"strategy"},"Strategy")),c.a.createElement(s.a,{w:"70%",pr:"1em"},c.a.createElement(s.a,{w:"30%"},c.a.createElement(x.a,{placeholder:"Select strategy",id:"strategy",name:"strategy"},c.a.createElement("option",{value:"tweet"},"tweet"),c.a.createElement("option",{value:"friend"},"friend"),c.a.createElement("option",{value:"follower"},"follower")))))),c.a.createElement(s.a,{d:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",w:"100%",mt:"2em"},c.a.createElement(s.a,{w:"100%",d:"flex",flexDirection:"row",justifyContent:"space-between"},c.a.createElement(s.a,{w:"20%",pl:"1em"},"Status"),c.a.createElement(s.a,{w:"70%",pr:"1em"},"0/2"))),c.a.createElement(s.a,{width:"100%",display:"flex",justifyContent:"space-between",pr:"1em",pl:"1em",mt:"20em"},c.a.createElement(s.a,{d:"flex",flexDirection:"row"},c.a.createElement(s.a,{ml:"1em"},c.a.createElement(u.a,{type:"submit"},"Start Campaign")))))):c.a.createElement(s.a,null,c.a.createElement(s.a,null," ",null==T?c.a.createElement(s.a,{d:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mt:"8em"},c.a.createElement(s.a,{d:"flex",w:"100%",justifyContent:"center"},c.a.createElement(f.a,{size:"20%",justifyContent:"center",src:h.a,alt:"Twitter logo"})),L?c.a.createElement(s.a,null,c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"2em"},L.name),c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"0.5em"},"@",L.handle),c.a.createElement(s.a,{d:"flex",flexDirection:"row",justifyContent:"center",w:"100%",mt:"0.5em"},c.a.createElement(s.a,null,L.following," Following"),c.a.createElement(s.a,{ml:"4%"},L.followers," Followers")),")"):""):c.a.createElement(s.a,null," ",L?c.a.createElement(s.a,null,c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"2em"},T.name),c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"0.5em"},T.id),c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"0.5em"},T.strategy),c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"0.5em"},T.message),c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"0.5em"},T.followers),c.a.createElement(s.a,{d:"flex",justifyContent:"center",w:"100%",mt:"0.5em"},T.started),c.a.createElement(s.a,{width:"100%",display:"flex",justifyContent:"space-between",pr:"1em",pl:"1em",mt:"20em"},c.a.createElement(s.a,{d:"flex",flexDirection:"row"},c.a.createElement(s.a,null,c.a.createElement(u.a,{onClick:()=>{return e=T.id,void fetch(C+"/campaign",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(e=>e.json()).then(t=>{if("success"==t.status){let t=_;_.map(a=>{if(a.id==e){const e=_.indexOf(a);e>-1&&(_.splice(e,1),t=_,D(t))}})}});var e}},"Delete Campaign")),c.a.createElement(s.a,{ml:"1em"},c.a.createElement(u.a,{onClick:()=>{return e=T.id,void fetch(C+"/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(e=>e.json()).then(e=>{if("success"==e.status){let e=T;e.started=!0,I(e)}});var e}},"Resume")),c.a.createElement(s.a,{ml:"1em"},c.a.createElement(u.a,{onClick:()=>{return e=T.id,void fetch(C+"/stop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(e=>e.json()).then(e=>{if("success"==e.status){let e=T;e.started=!1,I(e)}});var e}},"Pause"))))):""))))))}const O=document.getElementById("root");o.a.render(c.a.createElement(b,null),O)}},[[39,1,2]]]);